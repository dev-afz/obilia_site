(function(r){r.fn.counterUp=function(s){var d=r.extend({time:400,delay:10},s);return this.each(function(){var t=r(this),u=d;t.waypoint({offset:"100%",handler:function(){var c=[],o=u.time/u.delay,e=t.text(),f=/[0-9]+,[0-9]+/.test(e);e=e.replace(/,/g,""),/^[0-9]+$/.test(e);for(var i=/^[0-9]+\.[0-9]+$/.test(e),p=i?(e.split(".")[1]||[]).length:0,a=o;a>=1;a--){var n=parseInt(e/o*a);if(i&&(n=parseFloat(e/o*a).toFixed(p)),f)for(;/(\d+)(\d{3})/.test(n.toString());)n=n.toString().replace(/(\d+)(\d{3})/,"$1,$2");c.unshift(n)}t.data("counterup-nums",c),t.text("0"),t.data("counterup-func",function(){t.text(t.data("counterup-nums").shift()),t.data("counterup-nums").length?setTimeout(t.data("counterup-func"),u.delay):(t.data("counterup-nums"),t.data("counterup-nums",null),t.data("counterup-func",null))}),setTimeout(t.data("counterup-func"),u.delay),this.destroy()}})})}})(jQuery);
