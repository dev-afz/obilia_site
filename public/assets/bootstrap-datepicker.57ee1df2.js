(function(a,_){var I=a(window);function w(){return new Date(Date.UTC.apply(Date,arguments))}function T(){var e=new Date;return w(e.getFullYear(),e.getMonth(),e.getDate())}function F(e){return function(){return this[e].apply(this,arguments)}}var N=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var i=t&&t.valueOf(),s=0,n=this.length;s<n;s++)if(this[s].valueOf()===i)return s;return-1},remove:function(t){this.splice(t,1)},replace:function(t){!t||(a.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.splice(0)},copy:function(){var t=new N;return t.replace(this),t}};return function(){var t=[];return t.push.apply(t,arguments),a.extend(t,e),t}}(),C=function(e,t){this.dates=new N,this.viewDate=T(),this.focusDate=null,this._process_options(t),this.element=a(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=a(d.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(i,s){return parseInt(s)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};C.prototype={constructor:C,_process_options:function(e){this._o=a.extend({},this._o,e);var t=this.o=a.extend({},this._o),i=t.language;switch(u[i]||(i=i.split("-")[0],u[i]||(i=Y.language)),t.language=i,t.startView){case 2:case"decade":t.startView=2;break;case 1:case"year":t.startView=1;break;default:t.startView=0}switch(t.minViewMode){case 1:case"months":t.minViewMode=1;break;case 2:case"years":t.minViewMode=2;break;default:t.minViewMode=0}t.startView=Math.max(t.startView,t.minViewMode),t.multidate!==!0&&(t.multidate=Number(t.multidate)||!1,t.multidate!==!1?t.multidate=Math.max(0,t.multidate):t.multidate=1),t.multidateSeparator=String(t.multidateSeparator),t.weekStart%=7,t.weekEnd=(t.weekStart+6)%7;var s=d.parseFormat(t.format);t.startDate!==-1/0&&(t.startDate?t.startDate instanceof Date?t.startDate=this._local_to_utc(this._zero_time(t.startDate)):t.startDate=d.parseDate(t.startDate,s,t.language):t.startDate=-1/0),t.endDate!==1/0&&(t.endDate?t.endDate instanceof Date?t.endDate=this._local_to_utc(this._zero_time(t.endDate)):t.endDate=d.parseDate(t.endDate,s,t.language):t.endDate=1/0),t.daysOfWeekDisabled=t.daysOfWeekDisabled||[],a.isArray(t.daysOfWeekDisabled)||(t.daysOfWeekDisabled=t.daysOfWeekDisabled.split(/[,\s]*/)),t.daysOfWeekDisabled=a.map(t.daysOfWeekDisabled,function(h){return parseInt(h,10)});var n=String(t.orientation).toLowerCase().split(/\s+/g),r=t.orientation.toLowerCase();if(n=a.grep(n,function(h){return/^auto|left|right|top|bottom$/.test(h)}),t.orientation={x:"auto",y:"auto"},!(!r||r==="auto"))if(n.length===1)switch(n[0]){case"top":case"bottom":t.orientation.y=n[0];break;case"left":case"right":t.orientation.x=n[0];break}else r=a.grep(n,function(h){return/^left|right$/.test(h)}),t.orientation.x=r[0]||"auto",r=a.grep(n,function(h){return/^top|bottom$/.test(h)}),t.orientation.y=r[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t=0,i,s,n;t<e.length;t++)i=e[t][0],e[t].length===2?(s=_,n=e[t][1]):e[t].length===3&&(s=e[t][1],n=e[t][2]),i.on(n,s)},_unapplyEvents:function(e){for(var t=0,i,s,n;t<e.length;t++)i=e[t][0],e[t].length===2?(n=_,s=e[t][1]):e[t].length===3&&(n=e[t][1],s=e[t][2]),i.off(s,n)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(function(e){a.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(function(e){a.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:a.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:a.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,t){var i=t||this.dates.get(-1),s=this._utc_to_local(i);this.element.trigger({type:e,date:s,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(n,r){arguments.length===0?(n=this.dates.length-1,r=this.o.format):typeof n=="string"&&(r=n,n=this.dates.length-1),r=r||this.o.format;var h=this.dates.get(n);return d.formatDate(h,r,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||!this.picker.is(":visible")||(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:F("setDates"),setUTCDate:F("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(e){e===_&&(e=this.o.format);var t=this.o.language;return a.map(this.dates,function(i){return d.formatDate(i,e,t)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),t=this.picker.outerHeight(),i=10,s=I.width(),n=I.height(),r=I.scrollTop(),h=parseInt(this.element.parents().filter(function(){return a(this).css("z-index")!=="auto"}).first().css("z-index"))+10,o=this.component?this.component.parent().offset():this.element.offset(),f=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),D=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),l=o.left,y=o.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(l-=e-D)):(this.picker.addClass("datepicker-orient-left"),o.left<0?l-=o.left-i:o.left+e>s&&(l=s-e-i));var v=this.o.orientation.y,g,m;v==="auto"&&(g=-r+o.top-t,m=r+n-(o.top+f+t),Math.max(g,m)===m?v="top":v="bottom"),this.picker.addClass("datepicker-orient-"+v),v==="top"?y+=f:y-=t+parseInt(this.picker.css("padding-top")),this.picker.css({top:y,left:l,zIndex:h})}},_allow_update:!0,update:function(){if(!!this._allow_update){var e=this.dates.copy(),t=[],i=!1;arguments.length?(a.each(arguments,a.proxy(function(s,n){n instanceof Date&&(n=this._local_to_utc(n)),t.push(n)},this)),i=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),t&&this.o.multidate?t=t.split(this.o.multidateSeparator):t=[t],delete this.element.data().date),t=a.map(t,a.proxy(function(s){return d.parseDate(s,this.o.format,this.o.language)},this)),t=a.grep(t,a.proxy(function(s){return s<this.o.startDate||s>this.o.endDate||!s},this),!0),this.dates.replace(t),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():t.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';t+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+u[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+u[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(e){!e||!e.length?delete this.range:this.range=a.map(e,function(t){return t.valueOf()}),this.fill()},getClassNames:function(e){var t=[],i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),n=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<s?t.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>s)&&t.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&t.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===n.getFullYear()&&e.getUTCMonth()===n.getMonth()&&e.getUTCDate()===n.getDate()&&t.push("today"),this.dates.contains(e)!==-1&&t.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||a.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&t.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&t.push("range"),a.inArray(e.valueOf(),this.range)!==-1&&t.push("selected")),t},fill:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,n=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,r=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,o=u[this.o.language].today||u.en.today||"",f=u[this.o.language].clear||u.en.clear||"",D;this.picker.find(".datepicker-days thead th.datepicker-switch").text(u[this.o.language].months[i]+" "+t),this.picker.find("tfoot th.today").text(o).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(f).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var l=w(t,i-1,28),y=d.getDaysInMonth(l.getUTCFullYear(),l.getUTCMonth());l.setUTCDate(y),l.setUTCDate(y-(l.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(l);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var g=[],m;l.valueOf()<v;){if(l.getUTCDay()===this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var M=new Date(+l+(this.o.weekStart-l.getUTCDay()-7)%7*864e5),U=new Date(Number(M)+(7+4-M.getUTCDay())%7*864e5),k=new Date(Number(k=w(U.getUTCFullYear(),0,1))+(7+4-k.getUTCDay())%7*864e5),p=(U-k)/864e5/7+1;g.push('<td class="cw">'+p+"</td>")}if(m=this.getClassNames(l),m.push("day"),this.o.beforeShowDay!==a.noop){var c=this.o.beforeShowDay(this._utc_to_local(l));c===_?c={}:typeof c=="boolean"?c={enabled:c}:typeof c=="string"&&(c={classes:c}),c.enabled===!1&&m.push("disabled"),c.classes&&(m=m.concat(c.classes.split(/\s+/))),c.tooltip&&(D=c.tooltip)}m=a.unique(m),g.push('<td class="'+m.join(" ")+'"'+(D?' title="'+D+'"':"")+">"+l.getUTCDate()+"</td>"),l.getUTCDay()===this.o.weekEnd&&g.push("</tr>"),l.setUTCDate(l.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var x=this.picker.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");a.each(this.dates,function(A,O){O.getUTCFullYear()===t&&x.eq(O.getUTCMonth()).addClass("active")}),(t<s||t>r)&&x.addClass("disabled"),t===s&&x.slice(0,n).addClass("disabled"),t===r&&x.slice(h+1).addClass("disabled"),g="",t=parseInt(t/10,10)*10;var P=this.picker.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");t-=1;for(var j=a.map(this.dates,function(A){return A.getUTCFullYear()}),b,S=-1;S<11;S++)b=["year"],S===-1?b.push("old"):S===10&&b.push("new"),a.inArray(t,j)!==-1&&b.push("active"),(t<s||t>r)&&b.push("disabled"),g+='<span class="'+b.join(" ")+'">'+t+"</span>",t+=1;P.html(g)},updateNavArrows:function(){if(!!this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break}}},click:function(e){e.preventDefault();var t=a(e.target).closest("span, td, th"),i,s,n;if(t.length===1)switch(t[0].nodeName.toLowerCase()){case"th":switch(t[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var r=d.modes[this.viewMode].navStep*(t[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,r),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,r),this.viewMode===1&&this._trigger("changeYear",this.viewDate);break}this.fill();break;case"today":var h=new Date;h=w(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0),this.showMode(-2);var o=this.o.todayBtn==="linked"?null:"view";this._setDate(h,o);break;case"clear":var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide();break}break;case"span":t.is(".disabled")||(this.viewDate.setUTCDate(1),t.is(".month")?(n=1,s=t.parent().find("span").index(t),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(w(i,s,n))):(n=1,s=0,i=parseInt(t.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(w(i,s,n))),this.showMode(-1),this.fill());break;case"td":t.is(".day")&&!t.is(".disabled")&&(n=parseInt(t.text(),10)||1,i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),t.is(".old")?s===0?(s=11,i-=1):s-=1:t.is(".new")&&(s===11?(s=0,i+=1):s+=1),this._setDate(w(i,s,n)));break}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e?t!==-1?this.dates.remove(t):this.dates.push(e):this.dates.clear(),typeof this.o.multidate=="number")for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){(!t||t==="date")&&this._toggle_multidate(e&&new Date(e)),(!t||t==="view")&&(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(e,t){if(!e)return _;if(!t)return e;var i=new Date(e.valueOf()),s=i.getUTCDate(),n=i.getUTCMonth(),r=Math.abs(t),h,o;if(t=t>0?1:-1,r===1)o=t===-1?function(){return i.getUTCMonth()===n}:function(){return i.getUTCMonth()!==h},h=n+t,i.setUTCMonth(h),(h<0||h>11)&&(h=(h+12)%12);else{for(var f=0;f<r;f++)i=this.moveMonth(i,t);h=i.getUTCMonth(),i.setUTCDate(s),o=function(){return h!==i.getUTCMonth()}}for(;o();)i.setUTCDate(--s),i.setUTCMonth(h);return i},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){e.keyCode===27&&this.show();return}var t=!1,i,s,n,r=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;i=e.keyCode===37?-1:1,e.ctrlKey?(s=this.moveYear(this.dates.get(-1)||T(),i),n=this.moveYear(r,i),this._trigger("changeYear",this.viewDate)):e.shiftKey?(s=this.moveMonth(this.dates.get(-1)||T(),i),n=this.moveMonth(r,i),this._trigger("changeMonth",this.viewDate)):(s=new Date(this.dates.get(-1)||T()),s.setUTCDate(s.getUTCDate()+i),n=new Date(r),n.setUTCDate(r.getUTCDate()+i)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;i=e.keyCode===38?-1:1,e.ctrlKey?(s=this.moveYear(this.dates.get(-1)||T(),i),n=this.moveYear(r,i),this._trigger("changeYear",this.viewDate)):e.shiftKey?(s=this.moveMonth(this.dates.get(-1)||T(),i),n=this.moveMonth(r,i),this._trigger("changeMonth",this.viewDate)):(s=new Date(this.dates.get(-1)||T()),s.setUTCDate(s.getUTCDate()+i*7),n=new Date(r),n.setUTCDate(r.getUTCDate()+i*7)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(r),t=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide();break}if(t){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var E=function(e,t){this.element=a(e),this.inputs=a.map(t.inputs,function(i){return i.jquery?i[0]:i}),delete t.inputs,a(this.inputs).datepicker(t).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(i){return a(i).data("datepicker")}),this.updateDates()};E.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=a.map(this.dates,function(t){return t.valueOf()});a.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var t=a(e.target).data("datepicker"),i=t.getUTCDate(),s=a.inArray(e.target,this.inputs),n=this.inputs.length;if(s!==-1){if(a.each(this.pickers,function(r,h){h.getUTCDate()||h.setUTCDate(i)}),i<this.dates[s])for(;s>=0&&i<this.dates[s];)this.pickers[s--].setUTCDate(i);else if(i>this.dates[s])for(;s<n&&i>this.dates[s];)this.pickers[s++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){a.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};function V(e,t){var i=a(e).data(),s={},n,r=new RegExp("^"+t.toLowerCase()+"([A-Z])");t=new RegExp("^"+t.toLowerCase());function h(f,D){return D.toLowerCase()}for(var o in i)t.test(o)&&(n=o.replace(r,h),s[n]=i[o]);return s}function W(e){var t={};if(!(!u[e]&&(e=e.split("-")[0],!u[e]))){var i=u[e];return a.each(R,function(s,n){n in i&&(t[n]=i[n])}),t}}var z=a.fn.datepicker;a.fn.datepicker=function(e){var t=Array.apply(null,arguments);t.shift();var i;return this.each(function(){var s=a(this),n=s.data("datepicker"),r=typeof e=="object"&&e;if(!n){var h=V(this,"date"),o=a.extend({},Y,h,r),f=W(o.language),D=a.extend({},Y,f,h,r);if(s.is(".input-daterange")||D.inputs){var l={inputs:D.inputs||s.find("input").toArray()};s.data("datepicker",n=new E(this,a.extend(D,l)))}else s.data("datepicker",n=new C(this,D))}if(typeof e=="string"&&typeof n[e]=="function"&&(i=n[e].apply(n,t),i!==_))return!1}),i!==_?i:this};var Y=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},R=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=C;var u=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,d.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,t,i){if(!e)return _;if(e instanceof Date)return e;typeof t=="string"&&(t=d.parseFormat(t));var s=/([\-+]\d+)([dmwy])/,n=e.match(/([\-+]\d+)([dmwy])/g),r,h,o;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,o=0;o<n.length;o++)switch(r=s.exec(n[o]),h=parseInt(r[1]),r[2]){case"d":e.setUTCDate(e.getUTCDate()+h);break;case"m":e=C.prototype.moveMonth.call(C.prototype,e,h);break;case"w":e.setUTCDate(e.getUTCDate()+h*7);break;case"y":e=C.prototype.moveYear.call(C.prototype,e,h);break}return w(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}n=e&&e.match(this.nonpunctuation)||[],e=new Date;var f={},D=["yyyy","yy","M","MM","m","mm","d","dd"],l={yyyy:function(p,c){return p.setUTCFullYear(c)},yy:function(p,c){return p.setUTCFullYear(2e3+c)},m:function(p,c){if(isNaN(p))return p;for(c-=1;c<0;)c+=12;for(c%=12,p.setUTCMonth(c);p.getUTCMonth()!==c;)p.setUTCDate(p.getUTCDate()-1);return p},d:function(p,c){return p.setUTCDate(c)}},y,v;l.M=l.MM=l.mm=l.m,l.dd=l.d,e=w(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);var g=t.parts.slice();n.length!==g.length&&(g=a(g).filter(function(p,c){return a.inArray(c,D)!==-1}).toArray());function m(){var p=this.slice(0,n[o].length),c=n[o].slice(0,p.length);return p===c}if(n.length===g.length){var M;for(o=0,M=g.length;o<M;o++){if(y=parseInt(n[o],10),r=g[o],isNaN(y))switch(r){case"MM":v=a(u[i].months).filter(m),y=a.inArray(v[0],u[i].months)+1;break;case"M":v=a(u[i].monthsShort).filter(m),y=a.inArray(v[0],u[i].monthsShort)+1;break}f[r]=y}var U,k;for(o=0;o<D.length;o++)k=D[o],k in f&&!isNaN(f[k])&&(U=new Date(e),l[k](U,f[k]),isNaN(U)||(e=U))}return e},formatDate:function(e,t,i){if(!e)return"";typeof t=="string"&&(t=d.parseFormat(t));var s={d:e.getUTCDate(),D:u[i].daysShort[e.getUTCDay()],DD:u[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:u[i].monthsShort[e.getUTCMonth()],MM:u[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m,e=[];for(var n=a.extend([],t.separators),r=0,h=t.parts.length;r<=h;r++)n.length&&e.push(n.shift()),e.push(s[t.parts[r]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=d,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=z,this},a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var t=a(this);t.data("datepicker")||(e.preventDefault(),t.datepicker("show"))}),a(function(){a('[data-provide="datepicker-inline"]').datepicker()})})(window.jQuery);
